package userinterface;



import communication.Connection;
import javafx.event.Event;
import javafx.event.EventHandler;
import javafx.scene.control.ButtonType;
import javafx.scene.control.Dialog;
import javafx.scene.control.ProgressIndicator;
import javafx.scene.control.Button;
import javafx.stage.Stage;

public class CalibrateUI {

	private static ProgressIndicator loadingIndicator = new ProgressIndicator();
	
	public static void start() {
		Dialog<ButtonType> calibrate = new Dialog<>();
		((Stage) calibrate.getDialogPane().getScene().getWindow()).setAlwaysOnTop(true);
		calibrate.setTitle("Calibration");
		calibrate.setHeaderText("To ensure better measurements we will calibrate the device.\n Please connect both inputs of the oscilloscope to the ground (OV)");
		calibrate.setContentText("Click OK when both are connected to ground (OV)");
		calibrate.setGraphic(loadingIndicator);
		calibrate.getDialogPane().getButtonTypes().add(ButtonType.CANCEL);
		Button ok = new Button("Ok");
		ok.setOnMouseClicked(new EventHandler<Event>() {
			@Override
			public void handle(Event e) {
				Connection.send(UI.CALIBRATE);
				loadingIndicator.setVisible(true);
			}
		});
		calibrate.getDialogPane().setContent(ok);
		calibrate.getDialogPane().getChildren().add(new Button("Ok"));
		loadingIndicator.setVisible(false);
		
		calibrate.showAndWait();

			
	}
}
